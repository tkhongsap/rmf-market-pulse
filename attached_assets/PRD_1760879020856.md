# Product Requirements Document (PRD)
## Commodity & Currency Tracker - ChatGPT App

**Version**: 1.1
**Status**: Development / Pre-Launch
**Last Updated**: 2025-10-19
**Product Owner**: tkhongsap
**Compliance**: OpenAI Apps SDK Design Guidelines

---

## 1. Product Overview

### What We're Building
A native ChatGPT application that provides real-time commodity prices and currency exchange rates through natural language queries. The app integrates directly into ChatGPT conversations using the Model Context Protocol (MCP), allowing users to access financial market data without leaving the ChatGPT interface.

### Market Opportunity
- **800 million monthly active users** on ChatGPT
- Upcoming **ChatGPT App Store** launch (monetizable platform)
- Early apps historically capture significant market share
- No existing free, no-authentication financial data apps in ChatGPT ecosystem

### Value Proposition
Users can ask simple questions like "What's the current price of gold?" or "Show me major currency pairs" and receive real-time, accurate financial data displayed in an interactive widget - all within their ChatGPT conversation.

---

## 2. Design Principles

This app is designed to align with **OpenAI's Apps SDK Design Guidelines**, ensuring a high-quality, compliant ChatGPT experience.

### Core Principles

#### Conversational
The app feels like a **natural extension of ChatGPT**. Users interact through conversational queries like "What's the price of gold?" rather than navigating menus or forms. The app understands context and responds intelligently to follow-up questions.

#### Intelligent
The app is **context-aware** and supports user intent. It automatically detects when users ask about commodity prices or currency exchange rates, providing relevant data without requiring exact syntax or commands.

#### Simple
The app focuses on a **single clear outcome**: viewing real-time financial market data. No complex workflows, no multi-step processesâ€”just ask and receive. Each query results in a clean, easy-to-understand display of current prices and changes.

#### Responsive
The app is **fast and lightweight**:
- API response time: < 1 second
- Widget render time: < 500ms
- Total query-to-display: < 2 seconds
- Minimal data payload (only essential price information)

#### Accessible
The app **supports all users**, including those who rely on assistive technologies:
- WCAG 2.1 AA compliance (required)
- Screen reader compatibility
- Keyboard navigation support
- Sufficient color contrast ratios
- Clear, descriptive labels for all data points

---

## 3. Privacy & Security

### Data Minimization
This app collects **ZERO user data**:
- No personal information requested
- No tracking cookies or analytics on user identity
- No data stored beyond the current session
- Anonymous accessâ€”users never provide credentials

### No Sensitive Data
The app **never requests or accepts**:
- Payment card information (PCI)
- Protected health information (PHI)
- API keys, passwords, or credentials
- Social security numbers or government IDs
- Any personally identifiable information (PII)

### Read-Only Operations
All operations are **read-only** and safe to retry:
- No write operations to external systems
- No state changes or modifications
- No destructive actions
- No confirmations needed (viewing data only)
- Users can query repeatedly without side effects

### Privacy Policy
A published **privacy policy** will be provided (required for App Store submission) that clearly states:
- What data is accessed (Yahoo Finance public market data only)
- What data is collected (none)
- How data is used (displayed to user only)
- Data retention policy (no retention)

### Security Architecture
- **Sandboxed iframe**: Widget runs in isolated environment
- **HTTPS only**: All communications encrypted
- **No authentication**: Zero attack surface for credential theft
- **No external scripts**: All code self-contained
- **No third-party tracking**: No analytics or advertising SDKs

---

## 4. Problem Statement

### Current Pain Points
1. **Context Switching**: Users must leave ChatGPT to check financial data on separate websites or apps
2. **API Barriers**: Most financial data APIs require paid subscriptions, API keys, and authentication
3. **Complex Interfaces**: Traditional financial platforms have steep learning curves
4. **Data Fragmentation**: Commodity and forex data often in separate systems

### Our Solution
A conversational interface for financial data that:
- Eliminates context switching (embedded in ChatGPT)
- Requires zero authentication (free Yahoo Finance API)
- Uses natural language (no technical knowledge needed)
- Unifies commodities and forex in one tool

---

## 5. Target Users

### Primary Users
1. **Casual Investors**
   - Check portfolio holdings occasionally
   - Monitor major commodities (gold, oil) during news events
   - Need: Simple, quick price checks

2. **Traders & Analysts**
   - Track multiple assets throughout the day
   - Compare forex pairs and commodity correlations
   - Need: Real-time data, percentage changes

3. **Business Professionals**
   - Monitor exchange rates for international transactions
   - Track commodity prices affecting business costs
   - Need: Reliable data for decision-making

### Secondary Users
4. **Students & Researchers**
   - Learning about financial markets
   - Need examples and real-world data
   - Need: Free access, educational context

5. **Content Creators**
   - Writing about financial topics
   - Need: Quick fact-checking, current prices
   - Need: Accurate, timestamped data

---

## 6. Key Features

### Core Features (MVP)

#### 6.1 Real-Time Commodity Prices
**Supported Assets:**
- Precious Metals: Gold, Silver, Platinum, Palladium
- Energy: Crude Oil (WTI), Brent Crude, Natural Gas
- Industrial: Copper
- Agriculture: Wheat, Corn, Soybeans, Coffee, Sugar, Cotton

**Data Points:**
- Current price
- Daily change (absolute)
- Daily change (percentage)
- Currency denomination
- Last update timestamp

#### 6.2 Live Currency Exchange Rates
**Supported Pairs:**
- Major Pairs: EUR/USD, GBP/USD, USD/JPY, USD/CHF
- Commodity Currencies: AUD/USD, USD/CAD
- Cross Pairs: EUR/GBP, EUR/JPY, GBP/JPY
- 100+ additional pairs available

**Data Points:**
- Current exchange rate
- Daily change (absolute)
- Daily change (percentage)
- Last update timestamp

#### 6.3 Interactive Widget
- Color-coded gains (green) and losses (red)
- Responsive card-based layout
- Sortable data tables
- Mobile-friendly design

#### 6.4 Natural Language Interface
**Example Queries:**
- "What's the current price of gold?"
- "Show me the latest commodity prices"
- "What's the EUR/USD exchange rate?"
- "How is crude oil performing today?"
- "Show me major currency pairs"

---

## 7. Technical Architecture

### Technology Stack
- **Backend**: Node.js 20, Express.js, TypeScript
- **Protocol**: MCP (Model Context Protocol) SDK
- **Data Source**: Yahoo Finance API (via yahoo-finance2 npm package)
- **Module System**: ES2020 modules
- **Hosting**: Replit (permanent HTTPS, Always On)
- **Integration**: ChatGPT Developer Mode

### System Architecture
```
User Query (ChatGPT)
    â†“
MCP Protocol (/mcp endpoint)
    â†“
Express Server
    â†“
Yahoo Finance API (no auth)
    â†“
Data Formatting & Validation
    â†“
Widget Rendering (ChatGPT)
```

### Endpoints
- **MCP**: `/mcp` - ChatGPT integration
- **REST API**: `/api/commodities`, `/api/forex` - Direct access
- **Health**: `/healthz` - Monitoring

### Key Technical Decisions
1. **ES Modules**: Future-proof, better tree-shaking
2. **Yahoo Finance**: Free, no auth, no rate limits
3. **Dual Endpoints**: MCP for ChatGPT + REST for testing
4. **Replit Hosting**: Permanent URL, no configuration drift
5. **Read-Only Operations**: All operations are read-only (safe to retry, no confirmations needed)

---

## 8. User Experience

### User Flow
1. User asks question in ChatGPT
2. ChatGPT detects relevant app (tag: `@Commodity & Forex Tracker`)
3. User confirms tool call (security requirement)
4. App fetches real-time data from Yahoo Finance
5. Widget renders inline with formatted data
6. User can ask follow-up questions

### Widget Design

#### Visual System Compliance
Follows **ChatGPT's visual system** per OpenAI guidelines:
- **Colors**: Adheres to ChatGPT's color palette with semantic colors (green for gains, red for losses)
- **Typography**: Uses ChatGPT's type scale and font families
- **Spacing**: Consistent with ChatGPT's spacing system
- **Iconography**: Minimal, aligned with ChatGPT's visual language
- **Brand Identity**: Brand-agnostic design; no logos or promotional language

#### Progressive Disclosure
- **Summary View**: Shows key data points (price, change%) initially
- **Expand for Details**: Users can tap/click for additional information
- **Minimal UI**: Lightweight components suitable for inline rendering
- **Contextual Display**: Adapts to query type (single asset vs. multiple)

#### Technical Implementation
- **Sandboxed iframe**: Runs in isolated environment per OpenAI requirements
- **Responsive**: Mobile-first design, adapts to all screen sizes
- **Accessible**: WCAG 2.1 AA compliant (keyboard nav, screen readers, color contrast)
- **No External Dependencies**: Self-contained, no third-party scripts

### Performance Targets
- API response time: < 1 second
- Widget render time: < 500ms
- Total query-to-display: < 2 seconds
- Uptime: > 99%

---

## 9. Success Metrics

### Launch Metrics (First 30 Days)
- **Adoption**: 100+ users activate the app
- **Engagement**: 10+ queries per day average
- **Reliability**: 99% uptime
- **Accuracy**: 100% data match with Yahoo Finance

### Growth Metrics (3-6 Months)
- **User Growth**: 1,000+ active users
- **Query Volume**: 1,000+ queries per day
- **Retention**: 30% weekly active users
- **App Store Ranking**: Top 50 in Finance category

### Technical Metrics
- **API Success Rate**: > 98%
- **Average Response Time**: < 1.5 seconds
- **Error Rate**: < 2%
- **Data Freshness**: < 15 minutes delay

---

## 10. Dependencies & Risks

### Critical Dependencies
1. **Yahoo Finance API**
   - Risk: API changes or deprecation
   - Mitigation: Monitor for changes, have backup data sources ready

2. **ChatGPT App Store Launch**
   - Risk: Delayed launch or changed requirements
   - Mitigation: Continue development, maintain compatibility

3. **MCP Protocol Stability**
   - Risk: Breaking changes in MCP specification
   - Mitigation: Follow OpenAI developer docs, test regularly

### Technical Risks
1. **Rate Limiting**
   - Likelihood: Low (Yahoo Finance is generous)
   - Impact: High (app becomes unusable)
   - Mitigation: Implement caching, request throttling

2. **Data Quality**
   - Likelihood: Low (Yahoo Finance is reliable)
   - Impact: Medium (user trust)
   - Mitigation: Validate data, show timestamps, handle nulls gracefully

3. **Hosting Costs**
   - Likelihood: Medium (if usage grows significantly)
   - Impact: Medium (need to upgrade Replit plan)
   - Mitigation: Start with free tier, monitor usage, optimize requests

---

## 11. Future Enhancements

### Phase 2: Enhanced Data (Q1 2026)
- **Historical Charts**: Price trends over time (1D, 1W, 1M, 1Y)
- **Comparison Tools**: Side-by-side asset comparison
- **More Assets**: Cryptocurrency, major stock indices
- **Technical Indicators**: Moving averages, RSI, MACD

### Phase 3: Personalization (Q2 2026)
- **Watchlists**: Save favorite commodities/pairs
- **Price Alerts**: Notify when targets hit
- **Custom Views**: User-defined dashboard layouts
- **Portfolio Tracking**: Simple position tracking

### Phase 4: Advanced Features (Q3 2026)
- **News Integration**: Relevant financial news per asset
- **Economic Calendar**: Events affecting prices
- **Correlation Analysis**: Commodity-currency relationships
- **Export Options**: CSV, PDF reports

### Phase 5: Premium Features (Q4 2026)
- **Real-time Streaming**: Live price updates (WebSocket)
- **Advanced Analytics**: Statistical analysis, forecasting
- **API Access**: Programmatic access for power users
- **White Label**: Custom branding for businesses

---

## 12. App Store Submission Checklist

Before submitting to the ChatGPT App Store, ensure all OpenAI requirements are met:

### Required Documentation
- [ ] **Privacy Policy** - Published and accessible URL
  - States what data is accessed (Yahoo Finance public data)
  - States what data is collected (none)
  - Explains data usage (display only, no retention)
  - Includes contact information

- [ ] **App Description** - Clear, concise explanation of functionality
  - No promotional language
  - Accurate representation of capabilities
  - Use case examples

- [ ] **Developer Information** - Contact and support details

### Technical Requirements
- [ ] **Read-Only Operations Verified** - All operations are read-only
  - No write operations to external systems
  - No state modifications
  - Safe to retry without side effects

- [ ] **Performance Benchmarks Met**
  - API response time < 1 second
  - Widget render time < 500ms
  - Total query-to-display < 2 seconds
  - 99%+ uptime demonstrated

- [ ] **Security Audit Completed**
  - No sensitive data collection
  - No PCI, PHI, API keys, or credentials
  - Sandboxed iframe implementation
  - HTTPS-only communications

### Design Compliance
- [ ] **Visual System Compliance** - Follows ChatGPT design guidelines
  - Color palette aligned
  - Typography consistent
  - Spacing system followed
  - No ChatGPT interface alterations
  - Brand-agnostic presentation

- [ ] **Accessibility Testing** - WCAG 2.1 AA compliance
  - Screen reader compatibility verified
  - Keyboard navigation functional
  - Color contrast ratios sufficient
  - ARIA labels present and correct
  - Focus indicators visible

- [ ] **Responsive Design** - Works on all devices
  - Mobile (iOS, Android)
  - Tablet
  - Desktop
  - Various screen sizes tested

### User Experience
- [ ] **Conversational Flow** - Natural language queries work smoothly
- [ ] **Progressive Disclosure** - Information hierarchy clear
- [ ] **Error Handling** - Graceful failures with user-friendly messages
- [ ] **Loading States** - Clear feedback during data fetch

### Testing & Quality
- [ ] **End-to-End Testing** - Full user flows tested
- [ ] **Error Scenarios** - API failures handled gracefully
- [ ] **Edge Cases** - Invalid queries, missing data, timeouts tested
- [ ] **Load Testing** - Performance under concurrent requests verified

### Monitoring & Observability
- [ ] **Logging Implemented** - Errors and critical events tracked
- [ ] **Analytics Ready** - Usage metrics collection (anonymous)
- [ ] **Alerting Configured** - Downtime and error rate alerts

### Compliance & Legal
- [ ] **Terms of Service** - If applicable
- [ ] **Data Minimization Policy** - Documented and implemented
- [ ] **No Prohibited Content** - Verified app doesn't violate policies

---

## 13. Development Roadmap

### Pre-Launch (Current)
- âœ… Core MCP server implementation
- âœ… Yahoo Finance integration
- âœ… Dual endpoint architecture (MCP + REST)
- âœ… Frontend widget design
- âœ… Replit deployment configuration
- âœ… Documentation (DEPLOYMENT.md, CLAUDE.md)
- ðŸ”„ Testing with ChatGPT Developer Mode
- â³ Replit deployment
- â³ Production testing

### Launch (Week 1)
- Deploy to Replit production
- Configure in ChatGPT Developer Mode
- End-to-end testing with real queries
- Monitor for errors and performance issues
- Gather user feedback

### Post-Launch (Weeks 2-4)
- Bug fixes based on user feedback
- Performance optimization
- Add more commodity/forex pairs based on demand
- Improve widget UI/UX
- Prepare for App Store submission

### App Store Submission (Month 2)
- Meet ChatGPT App Store requirements
- Create app listing (screenshots, description)
- Submit for review
- Public launch

---

## 14. Constraints & Requirements

### Must Have
- Free to use (no user authentication required)
- Works in ChatGPT without external logins
- Real-time data (< 15 minute delay)
- Mobile-responsive widget
- 99% uptime
- **Accessibility (WCAG 2.1 AA)** - Required by OpenAI
- **Privacy policy published** - Required for App Store submission
- **Read-only operations only** - No write capabilities
- **Visual system compliance** - Follows ChatGPT design guidelines

### Should Have
- Caching for frequently requested assets
- Error handling with user-friendly messages
- Logging for debugging
- Analytics for usage tracking

### Nice to Have
- Dark mode support
- Internationalization (multiple currencies/languages)
- Offline mode with last known prices
- Advanced keyboard shortcuts

### Won't Have (This Version)
- User accounts or authentication
- Paid subscription tiers
- Trading or transaction capabilities
- Investment advice or recommendations
- Historical data storage (longer than session)

---

## 15. Competitive Analysis

### Existing Solutions
1. **Traditional Finance Apps** (Yahoo Finance, Bloomberg, etc.)
   - Pros: Comprehensive data, established trust
   - Cons: Requires context switching, complex interfaces

2. **ChatGPT Plugins** (if any financial data plugins exist)
   - Pros: Already in ChatGPT ecosystem
   - Cons: May require authentication, limited free tiers

3. **Financial APIs** (Alpha Vantage, Twelve Data, etc.)
   - Pros: Reliable data, documentation
   - Cons: API keys required, rate limits on free tiers

### Our Competitive Advantage
- **Zero friction**: No signup, no API keys, no authentication
- **Native integration**: Built for ChatGPT from day one
- **Free forever**: Yahoo Finance has no costs
- **Conversational**: Natural language queries
- **Early mover**: First to market in ChatGPT App Store

---

## 16. Open Questions

1. **Monetization**: How to monetize if data source is free?
   - Potential: Premium features (alerts, historical data, advanced analytics)
   - Potential: White-label licensing
   - Potential: Advertising (non-intrusive)

2. **Data Expansion**: Which assets to add next?
   - User feedback will guide priorities
   - Consider: Crypto, stocks, indices, bonds

3. **Caching Strategy**: How long to cache data?
   - Balance: Freshness vs. API load
   - Proposal: 5-minute cache for most queries

4. **Error Handling**: What happens if Yahoo Finance is down?
   - Fallback to cached data with stale warning?
   - Show error message with retry option?

---

## Appendix

### Related Documentation
- **[DEPLOYMENT.md](./DEPLOYMENT.md)** - Replit deployment guide
- **[CHATGPT_APP_INSTRUCTIONS.md](./CHATGPT_APP_INSTRUCTIONS.md)** - Tutorial for building ChatGPT apps
- **[CLAUDE.md](./CLAUDE.md)** - Context for Claude Code instances
- **[README.md](./README.md)** - Quick start guide
- **[commodity-currency-tracker/README.md](./commodity-currency-tracker/README.md)** - App-specific documentation

### Contact & Feedback
- **Repository**: https://github.com/tkhongsap/my-sandbox
- **Issues**: https://github.com/tkhongsap/my-sandbox/issues

---

**Document History:**
- 2025-10-19: Initial PRD v1.0 created
- 2025-10-19: Updated to v1.1 - Aligned with OpenAI Apps SDK Design Guidelines
  - Added "Design Principles" section (5 core principles)
  - Added "Privacy & Security" section (data minimization, read-only operations)
  - Added "App Store Submission Checklist" section (comprehensive requirements)
  - Enhanced "Widget Design" with visual system compliance and progressive disclosure
  - Moved Accessibility from "Nice to Have" to "Must Have" (WCAG 2.1 AA required)
  - Updated "Technical Architecture" to emphasize read-only operations
  - Added OpenAI compliance requirements throughout
