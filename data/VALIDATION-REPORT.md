# Data Validation Report - RMF Funds JSON Files

**Generated:** 2025-11-11T01:08:00Z  
**Location:** `data/rmf-funds/`  
**Total Files:** 410

## Summary

| Metric | Count | Percentage |
|--------|-------|------------|
| Total JSON files | 410 | 100% |
| Files with null values | 410 | 100% |
| Funds without mapping | 93 | 22.7% |
| Funds with SEC API data | 0 | 0% |

## Null Value Analysis

All 410 files contain null values for the following fields:

| Field | Files with Null | Percentage |
|-------|----------------|------------|
| latest_nav | 410 | 100.0% |
| performance | 410 | 100.0% |
| benchmark | 410 | 100.0% |
| risk_metrics | 410 | 100.0% |
| asset_allocation | 410 | 100.0% |
| category | 410 | 100.0% |
| fees | 410 | 100.0% |
| involved_parties | 410 | 100.0% |
| top_holdings | 410 | 100.0% |
| risk_factors | 410 | 100.0% |
| suitability | 410 | 100.0% |
| document_urls | 410 | 100.0% |
| investment_minimums | 410 | 100.0% |
| fund_id | 93 | 22.7% |
| mapping_snapshot | 93 | 22.7% |

## Diagnosis

### ❌ Offline Metadata Only

All 410 files contain **OFFLINE metadata only** (no SEC API data). These files were generated by `utility/generate-offline-rmf-funds.ts` which intentionally sets most fields to null. This is expected behavior when SEC APIs are unavailable.

Each file contains:
- ✅ Basic identifiers (symbol, fund_name, amc)
- ✅ Metadata from CSV (fund_classification, management_style, etc.)
- ✅ Mapping snapshot (for 317 funds)
- ❌ Live NAV data (null)
- ❌ Performance metrics (null)
- ❌ Asset allocation (null)
- ❌ All other SEC API fields (null)

### ⚠️ Missing Fund Mappings

93 funds (22.7%) are missing from `data/fund-mapping.json`. These funds have:
- `fund_id`: null
- `mapping_snapshot`: null
- Additional error: "Fund mapping entry not found for this symbol."

**Funds without mapping (sample):**
- GOLD-RMF-A, GOLD-RMF-P
- KKP INRMF-F, KKP INRMF
- KKP MMRMF-F, KKP MMRMF
- M-BOND, M-CR, M-FIX
- M-RMF-A, M-RMF-P, M-VALUE
- ONE-DISCRMF-A, ONE-DISCRMF-P
- ONE-UGERMF-A, ONE-UGERMF-P
- ONE-VIETNAMRMF-A, ONE-VIETNAMRMF-P
- SCBRMASHARES(A), SCBRMASHARES(E)
- SCBRMCLEAN(A), SCBRMCLEAN(E)
- ... and 73 more

## Recommendation

### To Populate with Complete SEC API Data

To replace these offline placeholder files with complete data from SEC APIs:

1. **Ensure SEC API keys are configured** in `.env`:
   ```bash
   SEC_FUND_FACTSHEET_KEY=your_factsheet_api_key_here
   SEC_FUND_FACTSHEET_SECONDARY_KEY=your_secondary_key_here
   SEC_FUND_DAILY_INFO_KEY=your_daily_info_api_key_here
   ```

2. **Run the batch fetch script**:
   ```bash
   npx tsx tests/api/fetch-all-rmf-funds.ts
   ```

3. **Processing time**: Approximately 2-3 hours for all 410 funds
   - Rate limiting: 100ms delay between funds
   - API call delay: 250ms between endpoints (configurable via SEC_API_CALL_DELAY_MS)
   - Resume capability via `data/progress.json`

### To Fix Missing Mappings

The 93 unmapped funds need to be added to `data/fund-mapping.json`. This may require:
1. Checking if these symbols exist in SEC APIs with different naming
2. Manual mapping for funds with non-standard symbols
3. Updating the fund mapping generation script to handle edge cases

## File Structure Example

**Current (Offline):**
```json
{
  "fund_id": "M0774_2554",
  "symbol": "ABAPAC-RMF",
  "fund_name": "abrdn Asia Pacific Equity Retirement Mutual Fund",
  "amc": "ABERDEEN ASSET MANAGEMENT (THAILAND) LIMITED",
  "metadata": { "fund_classification": "EQASxJP", ... },
  "latest_nav": null,
  "performance": null,
  "benchmark": null,
  ...
}
```

**After SEC API Fetch:**
```json
{
  "fund_id": "M0774_2554",
  "symbol": "ABAPAC-RMF",
  "latest_nav": {
    "nav_date": "2025-11-08",
    "last_val": 15.23,
    "change": 0.12,
    "change_percent": 0.79
  },
  "performance": {
    "ytd": 8.5,
    "1y": 12.3,
    "3y": 25.7
  },
  ...
}
```

## Validation Script

To run this validation again:
```bash
node /tmp/validate-json.js
```
